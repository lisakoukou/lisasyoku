<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>äºˆç´„å®Œäº†</title>
  <style>
    body { font-family: "æ¸¸ã‚´ã‚·ãƒƒã‚¯", sans-serif; background-color: #f9f9f9; padding: 2rem; text-align: center; }
    .details { background: #e6ffe6; padding: 1.5rem; border-radius: 8px; max-width: 500px; margin: 2rem auto; text-align: left; }
    .back-button { background: #008000; color: white; padding: 0.8rem 2rem; border-radius: 4px; border: none; cursor: pointer; }
  </style>
</head>
<body>
  <h1>äºˆç´„å®Œäº† ğŸŠ</h1>
  <div class="details">
    <p><strong>åå‰ï¼š</strong><span id="displayName"></span></p>
    <p><strong>ãƒ¡ãƒ¼ãƒ«ï¼š</strong><span id="displayEmail"></span></p>
    <p><strong>äºˆç´„å¸­ï¼š</strong><span id="displaySeats"></span></p>
  </div>
  <button class="back-button" onclick="window.location.href='index.html'">å¸­ãƒãƒƒãƒ—ã¸æˆ»ã‚‹</button>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-app.js";
    import { getDatabase, ref, update, serverTimestamp } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyAPh0iGqnlJDPakQDTrpStt7_WV1gaVvBs",
      authDomain: "lisasyokudo.firebaseapp.com",
      databaseURL: "https://lisasyokudo-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "lisasyokudo",
      storageBucket: "lisasyokudo.firebasestorage.app",
      messagingSenderId: "94391681633",
      appId: "1:94391681633:web:515d6d17c9567e153b2020"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);
    const params = new URLSearchParams(window.location.search);
    
    document.getElementById("displayName").textContent = params.get("name");
    document.getElementById("displayEmail").textContent = params.get("email");
    
    const seats = JSON.parse(localStorage.getItem('finalizingReservationSeats') || '[]');
    document.getElementById("displaySeats").textContent = seats.join(', ');

    if (seats.length > 0) {
        const updates = {};
        seats.forEach(s => {
            updates[s + '/isTemp'] = false;
            updates[s + '/timestamp'] = serverTimestamp();
        });
        update(ref(db, 'seats'), updates).then(() => {
            localStorage.removeItem('finalizingReservationSeats');
        });
    }
  </script>
</body>
</html>

