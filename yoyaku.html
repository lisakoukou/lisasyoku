<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>予約情報入力 - 王の食堂</title>
  <style>
    body {
      font-family: 'Helvetica Neue', Arial, sans-serif;
      background-color: #f4f1ea;
      background-image: radial-gradient(#e0d8c8 1px, transparent 1px);
      background-size: 20px 20px;
      padding: 20px;
      margin: 0;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      color: #5d4037;
    }
    .container { width: 100%; max-width: 450px; }
    form {
      background: #ffffff;
      padding: 2.5rem;
      border-radius: 20px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.08);
      text-align: center;
    }
    h1 { color: #5d4037; font-size: 1.8rem; margin-bottom: 2rem; font-weight: 800; }
    h1 span { color: #ff7043; }
    .input-group { text-align: left; margin-bottom: 1.5rem; }
    label { display: block; margin-bottom: 0.5rem; font-weight: bold; color: #795548; }
    input[type="text"], input[type="email"] {
      width: 100%; padding: 0.8rem 1rem; font-size: 1rem;
      border: 2px solid #efebe9; border-radius: 10px; box-sizing: border-box;
      background-color: #fafafa; transition: 0.3s;
    }
    input:focus { outline: none; border-color: #ff7043; background-color: #fff; }
    .domain-note { font-size: 0.8rem; color: #e53935; margin-top: 0.5rem; font-weight: bold; }
    input[type="submit"] {
      background: linear-gradient(to right, #ff7043, #ff8a65);
      color: white; padding: 1rem; border: none; border-radius: 50px;
      margin-top: 1rem; cursor: pointer; width: 100%;
      font-size: 1.1rem; font-weight: bold; box-shadow: 0 4px 10px rgba(255, 112, 67, 0.3);
    }
    input[type="submit"]:hover { transform: translateY(-2px); }
    #message-box { display: none; margin-top: 1.5rem; padding: 1rem; border-radius: 10px; color: white; font-weight: bold; }
  </style>
</head>
<body>
  <div class="container">
      <form id="reservation-form">
        <h1>王の食堂<br><span>予約情報入力</span></h1>
        <div class="input-group">
            <label for="name">お名前</label>
            <input type="text" id="name" required placeholder="例：県立 太郎">
        </div>
        <div class="input-group">
            <label for="email">メールアドレス</label>
            <input type="email" id="email" required placeholder="example@gl.pen-kanagawa.ed.jp">
            <p class="domain-note">※ @gl.pen-kanagawa.ed.jp のみ使用可能です</p>
        </div>
        <div id="message-box"></div>
        <input type="submit" value="保存して席を選択する">
        <br>
        <a href="index.html" style="display:inline-block; margin-top:1rem; color:#9e9e9e; font-size:0.9rem;">席マップに戻る</a>
      </form>
  </div>
  <script>
    const ALLOWED_DOMAIN = "@gl.pen-kanagawa.ed.jp";
    const form = document.getElementById('reservation-form');
    const messageBox = document.getElementById('message-box');

    form.addEventListener('submit', (e) => {
        e.preventDefault();
        const name = document.getElementById('name').value.trim();
        const email = document.getElementById('email').value.trim().toLowerCase();
        
        if (!email.endsWith(ALLOWED_DOMAIN)) {
            showMessage(`エラー: ${ALLOWED_DOMAIN} のアドレスを使用してください。`, true);
            return;
        }
        
        localStorage.setItem('currentUserDetails', JSON.stringify({ name, email }));
        showMessage('認証成功。移動します...', false);
        setTimeout(() => { window.location.href = 'index.html'; }, 1000);
    });

    function showMessage(text, isError) {
        messageBox.textContent = text;
        messageBox.style.backgroundColor = isError ? '#ef5350' : '#66bb6a';
        messageBox.style.display = 'block';
    }
  </script>
</body>
</html>

